import{j as e,L as f,u as j,a as y,r,b as N,T as S,D as b}from"./index-DLaGDpFt.js";import{C as T,a as P}from"./CardContent-CEplgR6M.js";import{S as u,d as k}from"./Search-CS-yF3o9.js";import{d as A}from"./Add-goY6xyeb.js";import{I as E}from"./InputAdornment-Bj62wiSB.js";import{P as L,C as _}from"./course.service-D2LULmGS.js";function z({id:a,name:t,description:i,thumbnail:o}){return e.jsx("div",{className:"w-full rounded-lg overflow-hidden shadow-md bg-white hover:shadow-xl ",children:e.jsxs(f,{to:`/course-detail/${a}`,children:[e.jsx("div",{className:"relative h-36",children:e.jsx("img",{src:o,alt:"Online learning illustration",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl mb-2 text-gray-800",children:t}),e.jsx("p",{className:"text-sm",children:i})]})})})]})},a)}const D=()=>e.jsxs(T,{className:"shadow-sm",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:160}),e.jsxs(P,{children:[e.jsx(u,{variant:"text",height:32}),e.jsx(u,{variant:"text",height:24,width:"80%"}),e.jsx(u,{variant:"text",height:20,width:"60%"})]})]});function I({onSearch:a}){const{authUser:t}=j(),[i,o]=y(),[n,d]=r.useState(i.get("search")||""),{t:l}=N();r.useEffect(()=>{a&&a(n)},[n]);const m=g=>{const c=g.target.value;d(c),o(c?{search:c}:{})};return e.jsxs("div",{className:"flex-col flex w-full gap-y-2",children:[e.jsx("div",{className:"text-slate-600 font-semibold text-xl",children:t.role==="TEACHER"?l("manage_courses"):l("my_courses")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mb-2 w-full",children:[e.jsx(S,{fullWidth:!0,placeholder:"Tìm kiếm khoá học...",value:n,onChange:m,variant:"outlined",size:"small",sx:{maxWidth:"100%"},InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(k,{color:"action"})})}}),(t==null?void 0:t.role)==="TEACHER"&&e.jsx(f,{to:"/add-course",children:e.jsxs("button",{className:"ml-2 h-10 px-2 text-base bg-primaryDark text-center text-white rounded-lg hover:bg-secondary transition-colors flex items-center justify-center gap-1 min-w-44",style:{lineHeight:1},children:[e.jsx(A,{className:"w-4 h-4",fontSize:"small"}),"Thêm khóa học"]})})]})]})}const B=()=>{const{authUser:a}=j(),[t,i]=r.useState([]),[o,n]=r.useState(!1),d=8,[l,m]=r.useState(0),[g,c]=r.useState(0),[p,v]=r.useState("");r.useEffect(()=>{n(!0);const s={page:l,size:d};(async()=>{try{const h=await _.getMyCourses(a.role,s);i(h.content),m(h.number),c(h.totalPages)}catch(h){console.log(h)}finally{n(!1)}})()},[a.role,l,d]);const w=(s,x)=>{m(x-1)},C=s=>{v(s)};return e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-190px)] mt-4 mx-4",children:[e.jsx(b,{title:"Khóa học của tôi"}),e.jsxs("div",{className:"flex-grow p-3 rounded-lg bg-white shadow-sm",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{onSearch:C})}),o?e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:Array.from({length:4}).map((s,x)=>e.jsx(D,{},x))}):e.jsxs(e.Fragment,{children:[!((t==null?void 0:t.length)>0)&&e.jsx("div",{className:"text-center justify-center",children:"Bạn chưa đăng ký khóa học nào!"}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:Array.isArray(t)&&t.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())).map(s=>e.jsx(z,{id:s.id,name:s.name,description:s.description,thumbnail:s.thumbnail},s.id))})]})]}),e.jsx(L,{count:g,page:l+1,color:"primaryDark",className:"flex justify-center my-2",onChange:w})]})};export{B as default};
