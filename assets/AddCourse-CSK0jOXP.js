import{r as c,e as T,g as P,s as y,i as z,j as t,w as M,y as D,C as _,aF as ee,m as F,ak as V,f as G,P as te,a3 as q,ag as oe,ai as ae,T as se,a4 as E,X as ne,Y as X,ae as re,D as le}from"./index-DLaGDpFt.js";import{A as ie,D as ce}from"./AdapterDateFns-CBDRbbqS.js";import{C as pe}from"./CreateCurriculumForm-CEsLb1Zv.js";import"./Close-qOboYXcN.js";import"./InputAdornment-Bj62wiSB.js";import"./Chip-Q4OAIvXW.js";import"./Add-goY6xyeb.js";import"./Quiz-Cud4loKM.js";import"./MenuItem-COGcUi_h.js";import"./Grid-wrPUFNqh.js";import"./quill.snow-C5W79Y4l.js";import"./CardContent-CEplgR6M.js";const U=c.createContext({}),B=c.createContext({});function de(e){return T("MuiStep",e)}P("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const me=e=>{const{classes:o,orientation:a,alternativeLabel:s,completed:i}=e;return D({root:["root",a,s&&"alternativeLabel",i&&"completed"]},de,o)},ue=y("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.orientation],a.alternativeLabel&&o.alternativeLabel,a.completed&&o.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),xe=c.forwardRef(function(o,a){const s=z({props:o,name:"MuiStep"}),{active:i,children:p,className:m,component:d="div",completed:r,disabled:h,expanded:u=!1,index:l,last:n,...f}=s,{activeStep:v,connector:b,alternativeLabel:S,orientation:C,nonLinear:g}=c.useContext(U);let[x=!1,L=!1,N=!1]=[i,r,h];v===l?x=i!==void 0?i:!0:!g&&v>l?L=r!==void 0?r:!0:!g&&v<l&&(N=h!==void 0?h:!0);const R=c.useMemo(()=>({index:l,last:n,expanded:u,icon:l+1,active:x,completed:L,disabled:N}),[l,n,u,x,L,N]),j={...s,active:x,orientation:C,alternativeLabel:S,completed:L,disabled:N,expanded:u,component:d},I=me(j),k=t.jsxs(ue,{as:d,className:M(I.root,m),ref:a,ownerState:j,...f,children:[b&&S&&l!==0?b:null,p]});return t.jsx(B.Provider,{value:R,children:b&&!S&&l!==0?t.jsxs(c.Fragment,{children:[b,k]}):k})}),he=_(t.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),ve=_(t.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function be(e){return T("MuiStepIcon",e)}const O=P("MuiStepIcon",["root","active","completed","error","text"]);var H;const fe=e=>{const{classes:o,active:a,completed:s,error:i}=e;return D({root:["root",a&&"active",s&&"completed",i&&"error"],text:["text"]},be,o)},A=y(ee,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,o)=>o.root})(F(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${O.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${O.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${O.error}`]:{color:(e.vars||e).palette.error.main}}))),Se=y("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,o)=>o.text})(F(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),ge=c.forwardRef(function(o,a){const s=z({props:o,name:"MuiStepIcon"}),{active:i=!1,className:p,completed:m=!1,error:d=!1,icon:r,...h}=s,u={...s,active:i,completed:m,error:d},l=fe(u);if(typeof r=="number"||typeof r=="string"){const n=M(p,l.root);return d?t.jsx(A,{as:ve,className:n,ref:a,ownerState:u,...h}):m?t.jsx(A,{as:he,className:n,ref:a,ownerState:u,...h}):t.jsxs(A,{className:n,ref:a,ownerState:u,...h,children:[H||(H=t.jsx("circle",{cx:"12",cy:"12",r:"12"})),t.jsx(Se,{className:l.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:r})]})}return r});function ye(e){return T("MuiStepLabel",e)}const w=P("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Ce=e=>{const{classes:o,orientation:a,active:s,completed:i,error:p,disabled:m,alternativeLabel:d}=e;return D({root:["root",a,p&&"error",m&&"disabled",d&&"alternativeLabel"],label:["label",s&&"active",i&&"completed",p&&"error",m&&"disabled",d&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",i&&"completed",p&&"error",m&&"disabled",d&&"alternativeLabel"],labelContainer:["labelContainer",d&&"alternativeLabel"]},ye,o)},je=y("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.orientation]]}})({display:"flex",alignItems:"center",[`&.${w.alternativeLabel}`]:{flexDirection:"column"},[`&.${w.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Le=y("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,o)=>o.label})(F(({theme:e})=>({...e.typography.body2,display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${w.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${w.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${w.alternativeLabel}`]:{marginTop:16},[`&.${w.error}`]:{color:(e.vars||e).palette.error.main}}))),Ne=y("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,o)=>o.iconContainer})({flexShrink:0,display:"flex",paddingRight:8,[`&.${w.alternativeLabel}`]:{paddingRight:0}}),we=y("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,o)=>o.labelContainer})(F(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${w.alternativeLabel}`]:{textAlign:"center"}}))),W=c.forwardRef(function(o,a){const s=z({props:o,name:"MuiStepLabel"}),{children:i,className:p,componentsProps:m={},error:d=!1,icon:r,optional:h,slots:u={},slotProps:l={},StepIconComponent:n,StepIconProps:f,...v}=s,{alternativeLabel:b,orientation:S}=c.useContext(U),{active:C,disabled:g,completed:x,icon:L}=c.useContext(B),N=r||L;let R=n;N&&!R&&(R=ge);const j={...s,active:C,alternativeLabel:b,completed:x,disabled:g,error:d,orientation:S},I=Ce(j),k={slots:u,slotProps:{stepIcon:f,...m,...l}},[Q,$]=V("label",{elementType:Le,externalForwardedProps:k,ownerState:j}),[J,Z]=V("stepIcon",{elementType:R,externalForwardedProps:k,ownerState:j});return t.jsxs(je,{className:M(I.root,p),ref:a,ownerState:j,...v,children:[N||J?t.jsx(Ne,{className:I.iconContainer,ownerState:j,children:t.jsx(J,{completed:x,active:C,error:d,icon:N,...Z})}):null,t.jsxs(we,{className:I.labelContainer,ownerState:j,children:[i?t.jsx(Q,{...$,className:M(I.label,$==null?void 0:$.className),children:i}):null,h]})]})});W&&(W.muiName="StepLabel");function Ie(e){return T("MuiStepConnector",e)}P("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Me=e=>{const{classes:o,orientation:a,alternativeLabel:s,active:i,completed:p,disabled:m}=e,d={root:["root",a,s&&"alternativeLabel",i&&"active",p&&"completed",m&&"disabled"],line:["line",`line${G(a)}`]};return D(d,Ie,o)},Re=y("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.orientation],a.alternativeLabel&&o.alternativeLabel,a.completed&&o.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),ke=y("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.line,o[`line${G(a.orientation)}`]]}})(F(({theme:e})=>{const o=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:o,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),Te=c.forwardRef(function(o,a){const s=z({props:o,name:"MuiStepConnector"}),{className:i,...p}=s,{alternativeLabel:m,orientation:d="horizontal"}=c.useContext(U),{active:r,disabled:h,completed:u}=c.useContext(B),l={...s,alternativeLabel:m,orientation:d,active:r,completed:u,disabled:h},n=Me(l);return t.jsx(Re,{className:M(n.root,i),ref:a,ownerState:l,...p,children:t.jsx(ke,{className:n.line,ownerState:l})})});function Pe(e){return T("MuiStepper",e)}P("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const ze=e=>{const{orientation:o,nonLinear:a,alternativeLabel:s,classes:i}=e;return D({root:["root",o,a&&"nonLinear",s&&"alternativeLabel"]},Pe,i)},De=y("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.orientation],a.alternativeLabel&&o.alternativeLabel,a.nonLinear&&o.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Fe=t.jsx(Te,{}),$e=c.forwardRef(function(o,a){const s=z({props:o,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:p=!1,children:m,className:d,component:r="div",connector:h=Fe,nonLinear:u=!1,orientation:l="horizontal",...n}=s,f={...s,nonLinear:u,alternativeLabel:p,orientation:l,component:r},v=ze(f),b=c.Children.toArray(m).filter(Boolean),S=b.map((g,x)=>c.cloneElement(g,{index:x,last:x+1===b.length,...g.props})),C=c.useMemo(()=>({activeStep:i,alternativeLabel:p,connector:h,nonLinear:u,orientation:l}),[i,p,h,u,l]);return t.jsx(U.Provider,{value:C,children:t.jsx(De,{as:r,ownerState:f,className:M(v.root,d),ref:a,...n,children:S})})}),K=({onSubmitSuccess:e})=>{const[o,a]=c.useState(!1),[s,i]=c.useState(null),[p,m]=c.useState([]),[d,r]=c.useState(!1);c.useEffect(()=>{q.get("/categories").then(n=>m(n.data.data)).catch(n=>console.error("Failed to fetch categories:",n))},[]);const h=n=>{a(n.target.value==="new")},u=async n=>{var C,g;n.preventDefault(),r(!0);const f=new FormData,v=n.target.elements,b={name:v.courseName.value,description:v.description.value,startDate:s,categoryName:v.category.value==="new"?v.newCategory.value:v.category.value,state:v.state.value};f.append("courseInfo",new Blob([JSON.stringify(b)],{type:"application/json"}));const S=v.thumbnail.files[0];S&&f.append("thumbnail",S);try{const x=await q.post("/courses",f,{headers:{"Content-Type":"multipart/form-data"}});if(x.status===200){E(x.data.message);const L=x.data.data;localStorage.setItem("courseInfo",JSON.stringify(L)),e()}else E(x.data.message,{type:"error"})}catch(x){console.error("Error submitting form:",x),E(((g=(C=x.response)==null?void 0:C.data)==null?void 0:g.message)||"Error occurred",{type:"error"})}finally{r(!1)}},l="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm";return t.jsx(oe,{dateAdapter:ie,children:t.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx(ae,{isLoading:d}),t.jsx("div",{className:"mx-48 border border-slate-300 rounded-lg",children:t.jsxs("form",{onSubmit:u,className:"bg-white shadow-xl rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-center text-slate-700 mb-6",children:"Tạo khóa học mới"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 mb-1",children:"Danh mục"}),t.jsxs("select",{id:"category",name:"category",onChange:h,defaultValue:"",className:l,children:[t.jsx("option",{value:"",children:"Chọn danh mục"}),p.map(n=>t.jsx("option",{value:n.name,children:n.name},n.id)),t.jsx("option",{value:"new",children:"Thêm danh mục mới"})]})]}),o&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"newCategory",className:"block text-sm font-medium text-slate-700 mb-1",children:"Tên danh mục mới"}),t.jsx("input",{id:"newCategory",name:"newCategory",type:"text",placeholder:"Nhập tên danh mục mới",className:l})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"courseName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Tên khóa học"}),t.jsx("input",{id:"courseName",name:"courseName",type:"text",placeholder:"Nhập tên khóa học",className:l,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Mô tả"}),t.jsx("textarea",{id:"description",name:"description",rows:3,placeholder:"Nhập mô tả khóa học",className:l,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-700 mb-1",children:"Ngày bắt đầu"}),t.jsx(ce,{value:s,onChange:n=>i(n),inputFormat:"dd-MM-yyyy",className:"w-full rounded-xl",renderInput:n=>t.jsx(se,{...n,required:!0,fullWidth:!0,size:"medium",className:"bg-slate-100 rounded-md shadow-sm"})})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-slate-700 mb-1",children:"Trạng thái"}),t.jsxs("select",{id:"state",name:"state",defaultValue:"OPEN",className:l,children:[t.jsx("option",{value:"OPEN",children:"OPEN"}),t.jsx("option",{value:"CLOSED",children:"CLOSED"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"thumbnail",className:"block text-sm font-medium text-slate-700 mb-1",children:"Ảnh nền"}),t.jsx("input",{id:"thumbnail",name:"thumbnail",type:"file",accept:"image/*",className:`${l} file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primaryDark file:text-white`})]})]})]}),t.jsx("div",{className:"px-6 py-4 bg-slate-50 text-right",children:t.jsx("button",{type:"submit",className:"py-3 w-full px-6 bg-primaryDark text-white rounded-lg hover:bg-secondary transition-colors",children:"Tạo khóa học"})})]})})]})})};K.propTypes={onSubmitSuccess:te.func.isRequired};const Y=["Tạo khoá học mới","Tạo nội dung khoá học","Xác nhận"];function Ee(){const[e,o]=c.useState(0),a=ne(),[s,i]=c.useState(()=>{const r=localStorage.getItem("courseInfo");return r?JSON.parse(r):{}}),p=c.useRef(null);c.useEffect(()=>{localStorage.setItem("courseInfo",JSON.stringify(s))},[s]);const m=()=>{e<Y.length-1&&o(r=>r+1)},d=async()=>{p.current&&await p.current();const{id:r}=JSON.parse(localStorage.getItem("courseInfo"));localStorage.removeItem("courseInfo"),localStorage.removeItem("sections"),a(`/course-detail/${r}`)};return t.jsxs(X,{sx:{width:"100%",mx:"16px"},children:[t.jsx($e,{activeStep:e,alternativeLabel:!0,children:Y.map(r=>t.jsx(xe,{children:t.jsx(W,{sx:{"& .MuiStepLabel-label":{fontSize:"0.825rem",fontWeight:"bold"},"& .MuiSvgIcon-root":{fontSize:"1.75rem"}},children:r})},r))}),t.jsxs(X,{sx:{mt:2},children:[e===0&&t.jsx(K,{onSubmitSuccess:m}),e===1&&t.jsx(pe,{onSubmitSuccess:()=>{m(),E.success("Tạo module thành công!")},initialModules:[]}),e===2&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[t.jsx("div",{className:"text-xl font-bold mb- text-slate-700 mb-4",children:"Xác nhận"}),t.jsx("p",{className:"text-lg text-slate-700 mb-4",children:"Lưu ý, hãy ấn vào nút ✔ sau khi đã điền thông tin khóa học."}),t.jsx(re,{variant:"contained",color:"primary",onClick:d,children:"Chuyển hướng"})]})]})]})}const Ge=()=>t.jsxs(t.Fragment,{children:[t.jsx(le,{title:"Thêm khóa học"}),t.jsxs("div",{className:"min-h-[calc(100vh-170px)] bg-white shadow-sm m-4 rounded-lg",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-700 pl-6 pt-6",children:"Thêm khóa học"}),t.jsx(Ee,{})]})]});export{Ge as default};
