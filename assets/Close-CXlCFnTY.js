import{e as at,ah as nt,ag as it,U as he,Z as Ve,aj as ge,ao as Ue,al as Je,r as $,am as pt,N as lt,W as ct,cc as te,ai as ut,cd as dt,ce as je,aR as mt,aS as ft,S as oe,cf as Ee,cg as re,j as M,ap as ht,ch as gt,ci as ke,g as He,c0 as ye,c1 as we,aw as yt,cj as se,ck as _e}from"./index-D0u0md9i.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function wt(t){return it("MuiTooltip",t)}const u=nt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function vt(t){return Math.round(t*1e5)/1e5}const bt=t=>{const{classes:e,disableInteractive:n,arrow:w,touch:f,placement:x}=t,v={popper:["popper",!n&&"popperInteractive",w&&"popperArrow"],tooltip:["tooltip",w&&"tooltipArrow",f&&"touch",`tooltipPlacement${Ue(x.split("-")[0])}`],arrow:["arrow"]};return ht(v,wt,e)},Tt=he(Ve,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(ge(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${u.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${u.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${u.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${u.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${u.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${u.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${u.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${u.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),xt=he("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Ue(n.placement.split("-")[0])}`]]}})(ge(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Je(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${u.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${u.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${u.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${u.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${vt(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${u.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${u.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${u.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${u.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${u.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${u.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${u.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${u.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${u.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${u.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),$t=he("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(ge(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Je(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let ae=!1;const We=new gt;let H={x:0,y:0};function ne(t,e){return(n,...w)=>{e&&e(n,...w),t(n,...w)}}const Wt=$.forwardRef(function(e,n){var qe,Ae,Le;const w=pt({props:e,name:"MuiTooltip"}),{arrow:f=!1,children:x,classes:v,components:b={},componentsProps:h={},describeChild:L=!1,disableFocusListener:j=!1,disableHoverListener:q=!1,disableInteractive:N=!1,disableTouchListener:E=!1,enterDelay:A=100,enterNextDelay:y=0,enterTouchDelay:d=700,followCursor:g=!1,id:Q,leaveDelay:m=0,leaveTouchDelay:z=1500,onClose:r,onOpen:a,open:S,placement:p="bottom",PopperComponent:i,PopperProps:c={},slotProps:l={},slots:O={},title:I,TransitionComponent:k=Ee,TransitionProps:o,..._}=w,C=$.isValidElement(x)?x:M.jsx("span",{children:x}),W=lt(),X=ct(),[T,ie]=$.useState(),[B,Qe]=$.useState(null),G=$.useRef(!1),pe=N||g,xe=te(),le=te(),K=te(),$e=te(),[Xe,Ce]=ut({controlled:S,default:!1,name:"Tooltip",state:"open"});let D=Xe;const ce=dt(Q),F=$.useRef(),Y=je(()=>{F.current!==void 0&&(document.body.style.WebkitUserSelect=F.current,F.current=void 0),$e.clear()});$.useEffect(()=>Y,[Y]);const Pe=s=>{We.clear(),ae=!0,Ce(!0),a&&!D&&a(s)},Z=je(s=>{We.start(800+m,()=>{ae=!1}),Ce(!1),r&&D&&r(s),xe.start(W.transitions.duration.shortest,()=>{G.current=!1})}),ee=s=>{G.current&&s.type!=="touchstart"||(T&&T.removeAttribute("title"),le.clear(),K.clear(),A||ae&&y?le.start(ae?y:A,()=>{Pe(s)}):Pe(s))},ue=s=>{le.clear(),K.start(m,()=>{Z(s)})},[,Re]=$.useState(!1),Me=s=>{ke(s.target)||(Re(!1),ue(s))},ze=s=>{T||ie(s.currentTarget),ke(s.target)&&(Re(!0),ee(s))},Se=s=>{G.current=!0;const R=C.props;R.onTouchStart&&R.onTouchStart(s)},Ge=s=>{Se(s),K.clear(),xe.clear(),Y(),F.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",$e.start(d,()=>{document.body.style.WebkitUserSelect=F.current,ee(s)})},Ke=s=>{C.props.onTouchEnd&&C.props.onTouchEnd(s),Y(),K.start(z,()=>{Z(s)})};$.useEffect(()=>{if(!D)return;function s(R){R.key==="Escape"&&Z(R)}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[Z,D]);const Ye=mt(ft(C),ie,n);!I&&I!==0&&(D=!1);const de=$.useRef(),Ze=s=>{const R=C.props;R.onMouseMove&&R.onMouseMove(s),H={x:s.clientX,y:s.clientY},de.current&&de.current.update()},V={},me=typeof I=="string";L?(V.title=!D&&me&&!q?I:null,V["aria-describedby"]=D?ce:null):(V["aria-label"]=me?I:null,V["aria-labelledby"]=D&&!me?ce:null);const P={...V,..._,...C.props,className:oe(_.className,C.props.className),onTouchStart:Se,ref:Ye,...g?{onMouseMove:Ze}:{}},U={};E||(P.onTouchStart=Ge,P.onTouchEnd=Ke),q||(P.onMouseOver=ne(ee,P.onMouseOver),P.onMouseLeave=ne(ue,P.onMouseLeave),pe||(U.onMouseOver=ee,U.onMouseLeave=ue)),j||(P.onFocus=ne(ze,P.onFocus),P.onBlur=ne(Me,P.onBlur),pe||(U.onFocus=ze,U.onBlur=Me));const et=$.useMemo(()=>{var R;let s=[{name:"arrow",enabled:!!B,options:{element:B,padding:4}}];return(R=c.popperOptions)!=null&&R.modifiers&&(s=s.concat(c.popperOptions.modifiers)),{...c.popperOptions,modifiers:s}},[B,c]),J={...w,isRtl:X,arrow:f,disableInteractive:pe,placement:p,PopperComponentProp:i,touch:G.current},fe=bt(J),Oe=O.popper??b.Popper??Tt,De=O.transition??b.Transition??k??Ee,Ne=O.tooltip??b.Tooltip??xt,Ie=O.arrow??b.Arrow??$t,tt=re(Oe,{...c,...l.popper??h.popper,className:oe(fe.popper,c==null?void 0:c.className,(qe=l.popper??h.popper)==null?void 0:qe.className)},J),ot=re(De,{...o,...l.transition??h.transition},J),rt=re(Ne,{...l.tooltip??h.tooltip,className:oe(fe.tooltip,(Ae=l.tooltip??h.tooltip)==null?void 0:Ae.className)},J),st=re(Ie,{...l.arrow??h.arrow,className:oe(fe.arrow,(Le=l.arrow??h.arrow)==null?void 0:Le.className)},J);return M.jsxs($.Fragment,{children:[$.cloneElement(C,P),M.jsx(Oe,{as:i??Ve,placement:p,anchorEl:g?{getBoundingClientRect:()=>({top:H.y,left:H.x,right:H.x,bottom:H.y,width:0,height:0})}:T,popperRef:de,open:T?D:!1,id:ce,transition:!0,...U,...tt,popperOptions:et,children:({TransitionProps:s})=>M.jsx(De,{timeout:W.transitions.duration.shorter,...s,...ot,children:M.jsxs(Ne,{...rt,children:[I,f?M.jsx(Ie,{...st,ref:Qe}):null]})})})]})}),Bt=He(M.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),Ft=He(M.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"}),"InsertDriveFile");var ve={},Ct=we;Object.defineProperty(ve,"__esModule",{value:!0});var Pt=ve.default=void 0,Rt=Ct(ye()),Be=M;Pt=ve.default=(0,Rt.default)([(0,Be.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,Be.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");const Mt={lecture:"lectures",quiz:"quizzes",assignment:"assignments",resource:"resources"},Vt=()=>{const t=yt(),e=async(w,f)=>{var x,v,b,h,L,j,q;try{const N=await n(f);if(!N.success)return{success:!1};const E=N.modules||[],A=new Map;E.forEach(d=>A.set(d.id,d));const y=[];for(const d of w){let g=d.id;if(!g||String(g).startsWith("temp-"))g=(await t.post("/modules",{name:d.title,courseId:f})).data.data.id;else{const r=A.get(g);r&&r.title!==d.title&&await t.patch(`/modules/${g}`,{name:d.title})}y.push(g);const m=A.get(g),z=[];if(Array.isArray(d.contents)&&d.contents.length>0)for(const r of d.contents){let a=r.id;const S=!a||String(a).startsWith("temp-");if(r.type==="lecture"){const p={title:r.title,content:r.content||"",moduleId:g};if(S)a=(await t.post("/lectures",p)).data.data.id;else{const i=(x=m==null?void 0:m.contents)==null?void 0:x.find(c=>c.id===a&&c.type==="lecture");(!i||i.title!==r.title||i.content!==r.content)&&await t.patch(`/lectures/${a}`,p)}z.push(a)}else if(r.type==="quiz"){let p=r.id;const i=!p||String(p).startsWith("temp-"),c={title:r.title,description:r.description||"",startDate:se(r.startDate),endDate:se(r.endDate),timeLimit:Number(r.timeLimit||0),shuffled:r.shuffled||!1},l={...c,attemptAllowed:r.attemptAllowed||0};if(i)p=(await t.post("/quizzes",{...c,attemptAllowed:r.attemptAllowed||0,moduleId:g})).data.data.id,r.id=p;else{const o=(v=m==null?void 0:m.contents)==null?void 0:v.find(C=>C.id===p&&C.type==="quiz");(!o||o.title!==r.title||o.description!==r.description||o.startDate!==r.startDate||o.endDate!==r.endDate||o.attemptAllowed!==l.attemptAllowed||o.timeLimit!==l.timeLimit||o.shuffled!==l.shuffled)&&await t.patch(`/quizzes/${p}`,l)}const O=((h=(b=m==null?void 0:m.contents)==null?void 0:b.find(o=>o.id===p&&o.type==="quiz"))==null?void 0:h.questions)||[],I=O.map(o=>o.id),k=[];for(const o of r.questions){console.log("🚀 ~ submitModules ~ q:",o);const _=!o.id||String(o.id).startsWith("temp-"),W=`/question-quizzes/${o.type==="single"?"scq":o.type==="multiple"?"mcq":o.type==="truefalse"?"tfq":"fitb"}`,X={content:o.content||"",quizId:p,outcomeId:o.outcomeId||null,...o.type!=="fitb"?{options:o.options}:{},...o.type==="fitb"?{answerContent:o.answerContent}:{},...o.type==="multiple"?{answers:o.answer}:o.type!=="fitb"?{answer:o.answer}:{}};if(_){const T=await t.post(W,X);k.push(T.data.data.id)}else{k.push(o.id);const T=O.find(B=>B.id===o.id);(!T||T.content!==o.content||o.type!=="fitb"&&JSON.stringify(T.options)!==JSON.stringify(o.options)||o.type==="fitb"&&T.answerContent!==o.answerContent||(o.type==="multiple"?JSON.stringify(T.answers)!==JSON.stringify(o.answer):o.type!=="fitb"&&T.answer!==o.answer))&&await t.patch(`${W}/${o.id}`,X)}}for(const o of I)k.includes(o)||await t.delete(`/question-quizzes/${o}`);z.push(a)}else if(r.type==="assignment"){const p={title:r.title,content:r.content||"",state:r.state||"OPEN",startDate:se(r.startDate),endDate:se(r.endDate),moduleId:g};if(S)a=(await t.post("/assignments",p)).data.data.id;else{const i=(L=m==null?void 0:m.contents)==null?void 0:L.find(c=>c.id===a&&c.type==="assignment");(!i||i.title!==r.title||i.content!==r.content||i.startDate!==r.startDate||i.endDate!==r.endDate||i.state!==r.state)&&await t.patch(`/assignments/${a}`,p)}z.push(a)}else if(r.type==="resource"){const p=r.resourceData;if(p instanceof FormData){for(const[l,O]of p.entries())console.log(`${l}:`,O);const i=p.get("resources");let c;try{if(i instanceof Blob){const l=await i.text();c=JSON.parse(l)}else c=JSON.parse(i)}catch(l){console.error("❌ Lỗi khi parse JSON từ 'resources':",l);return}c.moduleId=g,p.set("resources",new Blob([JSON.stringify(c)],{type:"application/json"}));try{let l;S?(l=await t.post("/resources",p,{headers:{"Content-Type":"multipart/form-data"}}),a=(q=(j=l.data)==null?void 0:j.data)==null?void 0:q.id):l=await t.patch(`/resources/${a}`,p,{headers:{"Content-Type":"multipart/form-data"}}),a&&!String(a).startsWith("temp-")&&z.push(a)}catch(l){console.error("❌ Lỗi khi gửi FormData:",l)}}else if(!S)try{const i={file:r.urlDocument};await t.patch(`/resources/${a}`,i),a&&!String(a).startsWith("temp-")&&z.push(a)}catch(i){console.error("❌ Lỗi khi PATCH resource không có FormData:",i)}}}if(m){const r=(m.contents||[]).map(a=>({id:a.id,type:a.type}));for(const a of r)if(!z.includes(a.id)){const S=Mt[a.type];S&&await t.delete(`/${S}/${a.id}`)}}}for(const d of E)y.includes(d.id)||await t.delete(`/modules/${d.id}`);return{success:!0}}catch(N){return console.error("❌ submitModules error:",N),{success:!1}}},n=w=>t.get(`/courses/${w}/modules`).then(f=>{const x=f.data.data;return Promise.all(x.map(v=>Promise.all([t.get(`/modules/${v.id}/lectures`),t.get(`/modules/${v.id}/resources`),t.get(`/modules/${v.id}/assignments`),t.get(`/modules/${v.id}/quizzes`)]).then(([b,h,L,j])=>{const q=b.data.data.map(y=>({...y,type:"lecture"})),N=h.data.data.map(y=>({...y,type:"resource"})),E=L.data.data.map(y=>({...y,type:"assignment"}));return Promise.all(j.data.data.map(y=>t.get(`/quizzes/${y.id}/questions`).then(d=>({...y,type:"quiz",questions:d.data.data})))).then(y=>{const d=[...q,...N,...E,...y];return d.sort((g,Q)=>{const m=_e(g.createdAt),z=_e(Q.createdAt);return m-z}),{id:v.id,title:v.name,contents:d}})})))}).then(f=>({success:!0,modules:f})).catch(f=>(console.error(f),{success:!1,modules:[]}));return{submitModules:e,getModules:n}};var be={},zt=we;Object.defineProperty(be,"__esModule",{value:!0});var St=be.default=void 0,Ot=zt(ye()),Dt=M;St=be.default=(0,Ot.default)((0,Dt.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var Fe=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Nt(t,e){return!!(t===e||Fe(t)&&Fe(e))}function It(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Nt(t[n],e[n]))return!1;return!0}function qt(t,e){e===void 0&&(e=It);var n,w=[],f,x=!1;function v(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];return x&&n===this&&e(b,w)||(f=t.apply(this,b),x=!0,n=this,w=b),f}return v}const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));var Te={},At=we;Object.defineProperty(Te,"__esModule",{value:!0});var Lt=Te.default=void 0,jt=At(ye()),Et=M;Lt=Te.default=(0,jt.default)((0,Et.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");export{Bt as A,Ft as D,Wt as T,_t as X,St as a,Lt as b,qt as c,Pt as d,Ut as m,Vt as u};
