import{c as L,C as M,j as e,r as l,aw as d,Y as z,W as y,X as I,a1 as k,a2 as F,a8 as p,ax as Y,L as C,b as T,D as E}from"./index-DgiJRG6U.js";import{S as $,Q as P}from"./QuizzHeader-CNs1PNN6.js";import{I as N}from"./IconButton-BMbLE-ug.js";import{G as f}from"./Grid-CkNObJ73.js";import"./Quiz-DmcbhDP2.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),A=M(e.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft"),B=M(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");function H(){const[a,j]=l.useState(""),[h,D]=l.useState("this"),[b,w]=l.useState([]),[u,m]=l.useState([]),[v,g]=l.useState(!1);l.useEffect(()=>{(async()=>{g(!0);const n=new Date;let s=n.getMonth()+1,o=n.getFullYear();h==="next"&&(s+=1,s>12&&(s=1,o+=1));const i=new URLSearchParams;i.append("month",s.toString()),i.append("year",o.toString());const c=`/dashboard/get-by-month-year?${i.toString()}`;await k.get(c).then(r=>{w(r.data.data.assignments),m(r.data.data.quizzes)}).catch(r=>{F(r.response.data.message,{type:"error"})}).finally(()=>g(!1))})()},[h]);const S=b.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.courseName.toLowerCase().includes(a.toLowerCase())),x=u.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.courseName.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"bg-white m-4 px-6 py-2  rounded-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:d("time")}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h,onChange:t=>D(t.target.value),className:"appearance-none bg-white border border-slate-400 rounded-md py-2 pl-3 pr-10 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-primaryDark focus:border-primaryDark",children:[e.jsx("option",{value:"this",children:d("this_month")}),e.jsx("option",{value:"next",children:d("next_month")})]}),e.jsx(z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",placeholder:d("placeholder.search_by_name"),value:a,onChange:t=>j(t.target.value),className:"w-full bg-white border border-slate-400 rounded-md py-2 pl-10 pr-3 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-primaryDark focus:border-primaryDark"}),e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),v?e.jsx(y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:200},children:e.jsx(I,{})}):e.jsxs(e.Fragment,{children:[S.map(t=>e.jsx($,{courseID:t.courseId,id:t.id,title:`${t.courseName} - ${t.title}`,startDate:t.startDate,endDate:t.endDate},t.id)),x.map(t=>e.jsx(P,{courseID:t.courseId,id:t.id,title:`${t.courseName} - ${t.title}`,startDate:t.startDate,endDate:t.endDate},t.id))]})]})}const R=["T2","T3","T4","T5","T6","T7","CN"];function W(){const[a,j]=l.useState(new Date),[h,D]=l.useState([]),[b,w]=l.useState([]);l.useEffect(()=>{(async()=>{var n,s;try{const o=new URLSearchParams;o.append("month",(a.getMonth()+1).toString()),o.append("year",a.getFullYear().toString());const i=await k.get(`/dashboard/get-by-month-year?${o.toString()}`);D(i.data.data.assignments),w(i.data.data.quizzes)}catch(o){F(((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||"Lỗi khi tải sự kiện")}})()},[a]);const u=new Date(a.getFullYear(),a.getMonth()+1,0).getDate(),m=new Date(a.getFullYear(),a.getMonth(),1).getDay(),v=()=>{const t=[];let n=1;for(let s=0;n<=u;s++){const o=[];for(let i=0;i<7;i++)s===0&&i<(m===0?6:m-1)?o.push(null):n<=u?o.push(n++):o.push(null);t.push(o)}return t},g=t=>h.filter(n=>{const s=new Date(n.endDate);return s.getDate()===t&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}),S=t=>b.filter(n=>{const s=new Date(n.endDate);return s.getDate()===t&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}),x=t=>{j(new Date(a.getFullYear(),a.getMonth()+t))};return e.jsx("div",{className:"bg-white mx-4 rounded-md",children:e.jsxs(y,{sx:{p:2,fontFamily:"'Inter', sans-serif"},children:[e.jsxs(y,{mb:1,children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 ml-2",children:d("calendar")}),e.jsxs(y,{display:"flex",justifyContent:"center",alignItems:"center",gap:1,children:[e.jsx(N,{size:"small",onClick:()=>x(-1),children:e.jsx(A,{fontSize:"small"})}),e.jsxs(p,{variant:"subtitle1",fontWeight:"bold",children:[d("month")," ",a.getMonth()+1," / ",a.getFullYear()]}),e.jsx(N,{size:"small",onClick:()=>x(1),children:e.jsx(B,{fontSize:"small"})})]})]}),e.jsx(f,{container:!0,spacing:1,mb:1,children:R.map(t=>e.jsx(f,{item:!0,xs:1.7,children:e.jsx("div",{className:"text-center text-sm font-semibold text-slate-600",children:t})},t))}),v().map((t,n)=>e.jsx(f,{container:!0,spacing:1,children:t.map((s,o)=>{const i=new Date,c=s===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear();return e.jsx(f,{item:!0,xs:1.7,sx:{py:1},children:e.jsxs(Y,{variant:"outlined",sx:{minHeight:90,p:.5,bgcolor:c?"#e3f2fd":"transparent",borderColor:c?"primary.light":"divider"},children:[e.jsx(p,{variant:"caption",fontWeight:c?"bold":"light",color:c?"primary.main":"text.secondary",sx:{display:"block",fontSize:"0.8rem"},children:s}),s&&g(s).map(r=>e.jsx(p,{variant:"caption",sx:{display:"block",color:"primary.main",fontSize:"0.75rem",mt:.3,lineHeight:1.2},noWrap:!0,children:e.jsxs(C,{to:`/submission/${r.courseId}/${r.id}`,style:{textDecoration:"none",color:"inherit"},children:["• ",r.courseName," - ",r.title]})},r.id)),s&&S(s).map(r=>e.jsx(p,{variant:"caption",sx:{display:"block",color:"primary.main",fontSize:"0.75rem",mt:.3,lineHeight:1.2},noWrap:!0,children:e.jsxs(C,{to:`/quiz/${r.courseId}/${r.id}`,style:{textDecoration:"none",color:"inherit"},children:["• ",r.courseName," - ",r.title]})},r.id))]})},o)})},n))]})})}const J=()=>(T(),e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-170px)]",children:[e.jsx(E,{title:"Bảng điều khiển"}),e.jsx(H,{}),e.jsx(W,{})]}));export{J as default};
