import{j as e,L as v,C as y,a as N,u as w,b as S,r as a,c as k,T,I as E,d as P,M as A,D as L,G as M}from"./index-CjWvOQUe.js";import{S as g}from"./Skeleton-DA1YD-A5.js";import{d as I}from"./Search-CoX4_sYE.js";import{M as b}from"./MenuItem-Du2BLMJ8.js";import{P as _,C as z}from"./course.service-otq-0R-S.js";function B({id:n,name:t,description:r,thumbnail:c}){return e.jsx("div",{className:"w-full rounded-lg overflow-hidden shadow-md bg-white hover:shadow-xl ",children:e.jsxs(v,{to:`/course-detail/${n}`,children:[e.jsx("div",{className:"relative h-36",children:e.jsx("img",{src:c,alt:"Online learning illustration",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl mb-2 text-gray-800",children:t}),e.jsx("p",{className:"text-sm  line-clamp-3",children:r})]})})})]})},n)}const F=()=>e.jsxs(y,{className:"shadow-sm",children:[e.jsx(g,{variant:"rectangular",width:"100%",height:160}),e.jsxs(N,{children:[e.jsx(g,{variant:"text",height:32}),e.jsx(g,{variant:"text",height:24,width:"80%"}),e.jsx(g,{variant:"text",height:20,width:"60%"})]})]});function W({onSearch:n}){const{authUser:t}=w(),[r,c]=S(),[l,x]=a.useState(r.get("search")||""),{t:o}=k(),[i,u]=a.useState(null),j=!!i;a.useEffect(()=>{n&&n(l)},[l]);const p=d=>{const s=d.target.value;x(s),c(s?{search:s}:{})},C=d=>{u(d.currentTarget)},h=()=>{u(null)};return e.jsxs("div",{className:"flex-col flex w-full gap-y-2",children:[e.jsx("div",{className:"text-slate-600 font-semibold text-xl py-2",children:t.role==="TEACHER"?o("manage_courses"):o("my_courses")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mb-2 w-full",children:[e.jsx(T,{fullWidth:!0,placeholder:"Tìm kiếm khoá học...",value:l,onChange:p,variant:"outlined",size:"small",sx:{maxWidth:"100%"},InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(I,{color:"action"})})}}),(t==null?void 0:t.role)==="TEACHER"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"ml-2 h-10 px-2 text-base bg-gradient-to-br from-[#5BCEC9] to-[#14919B] shadow-md hover:shadow-lgtext-center text-white rounded-lg  transition-colors flex items-center justify-center gap-1 min-w-44",style:{lineHeight:1},onClick:C,children:[e.jsx(P,{className:"w-4 h-4",fontSize:"small"}),"Thêm khóa học"]}),e.jsxs(A,{anchorEl:i,open:j,onClose:h,children:[e.jsx(b,{component:v,to:"/add-course",onClick:h,sx:{fontWeight:"bold",color:"#64748b","&:hover":{backgroundColor:"#eff6ff",color:"#64748b"}},children:"Thêm mới"}),e.jsx(b,{component:v,to:"/add-course-from-old",onClick:h,sx:{fontWeight:"bold",color:"#64748b","&:hover":{backgroundColor:"#eff6ff",color:"#64748b"}},children:"Thêm từ khoá học cũ"})]})]})]})]})}const K=()=>{const{authUser:n}=w(),[t,r]=a.useState([]),[c,l]=a.useState(!1),x=8,[o,i]=a.useState(0),[u,j]=a.useState(0),[p,C]=a.useState("");a.useEffect(()=>{l(!0);const s={page:o,size:x};(async()=>{try{const m=await z.getMyCourses(n.role,s);r(m.content),i(m.number),j(m.totalPages)}catch(m){console.log(m)}finally{l(!1)}})()},[n.role,o,x]);const h=(s,f)=>{i(f-1)},d=s=>{C(s)};return e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-190px)] mt-4 mx-4",children:[e.jsx(L,{title:"Khóa học của tôi"}),e.jsxs("div",{className:"flex-grow p-3 rounded-lg bg-white shadow-sm",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(W,{onSearch:d})}),c?e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:Array.from({length:4}).map((s,f)=>e.jsx(F,{},f))}):e.jsxs(e.Fragment,{children:[!((t==null?void 0:t.length)>0)&&e.jsxs("div",{className:"flex flex-col items-center justify-center my-20 text-slate-600 font-semibold",children:[e.jsx(M,{className:"h-16 w-16 animate-bounce"}),"Bạn chưa đăng ký khóa học nào!"]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:Array.isArray(t)&&t.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())).map(s=>e.jsx(B,{id:s.id,name:s.name,description:s.description,thumbnail:s.thumbnail},s.id))})]})]}),e.jsx(_,{count:u,page:o+1,color:"primaryDark",className:"flex justify-center my-2",onChange:h})]})};export{K as default};
