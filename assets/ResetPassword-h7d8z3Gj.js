import{r,a as E,X as M,j as e,D as q,ai as z,aw as u,am as I,a4 as d}from"./index-DLaGDpFt.js";import{u as L,c as m,E as h,a as p}from"./index-CFRw-7QU.js";const A=()=>{const[x,i]=r.useState(!1),[f,b]=r.useState(5),[g]=E(),w=M(),j={password:""},[o,y]=r.useState(!1),[n,k]=r.useState(!1),{register:l,handleSubmit:v,formState:{errors:t},watch:N}=L({defaultValues:j}),P=async({password:s})=>{i(!0);const S=g.get("token");try{const a=await I.resetPassword(S,s);if(a.code===200){d(`${a.message} Chuyển hướng sau ${f}s`,{type:"success"});const C=setInterval(()=>{b(c=>(c===1&&(clearInterval(C),w("/login")),c-1))},1e3)}else d(a.response.data.message,{type:"error"})}catch(a){console.log(a),d(a.response.data.message,{type:"error"})}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Quên mật khẩu"}),e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[e.jsx(z,{isLoading:x}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Quên mật khẩu"}),e.jsxs("form",{onSubmit:v(P),className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"mt-1 relative rounded-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(u,{className:"text-[#00ba9d] mr-2"})}),e.jsx("input",{type:n?"text":"password",id:"password",name:"password",placeholder:"Mật khẩu mới",required:!0,className:m("block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":t.password}),...l("password",{required:!0,validate:{minLength:s=>s.length>=6||"Mật khẩu phải có ít nhất 6 kí tự!",hasSpecialChar:s=>/[!@#$%^&*(),.?":{}|<>]/.test(s)||"Mật khẩu phải chứa ít nhất 1 kí tự đặc biệt!",hasUpperCase:s=>/[A-Z]/.test(s)||"Mật khẩu phải chứa ít nhất 1 kí tự viết hoa!"}})}),e.jsx("button",{type:"button",className:"absolute right-3 top-[8px] text-gray-500",onClick:()=>k(!n),children:n?e.jsx(h,{size:20}):e.jsx(p,{size:20})}),t.password&&e.jsx("p",{className:"text-sm text-rose-500 dark:text-red-500",children:e.jsx("span",{className:"font-medium",children:t.password.message})})]})}),e.jsx("div",{children:e.jsxs("div",{className:"mt-1 relative rounded-md",children:[e.jsx("div",{className:"absolute top-[12px] left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(u,{className:"text-[#00ba9d] mr-2"})}),e.jsx("input",{id:"confirmPassword",type:o?"text":"password",name:"confirmPassword",placeholder:"Xác nhận mật khẩu",required:!0,className:m("block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-300":t.confirmPassword}),...l("confirmPassword",{required:!0,validate:s=>s===N("password")||"Mật khẩu không khớp"})}),e.jsx("button",{type:"button",className:"absolute right-3 top-[8px] text-gray-500",onClick:()=>y(!o),children:o?e.jsx(h,{size:20}):e.jsx(p,{size:20})}),t.confirmPassword&&e.jsx("p",{className:"text-sm text-rose-500 dark:text-red-500",children:e.jsx("span",{className:"font-medium",children:t.confirmPassword.message})})]})}),e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#00ba9d] hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#00ba9d] transition-all duration-300",children:"Đổi mật khẩu"})]})]})]})]})};export{A as default};
