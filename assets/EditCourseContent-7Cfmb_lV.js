import{g as I,j as t,h as b,a2 as j,v as g,r as f,x as C,y,J as E}from"./index-D0u0md9i.js";import{C as S}from"./CreateCurriculumForm-y758p6G7.js";import{T as M,u as q}from"./Close-CXlCFnTY.js";import"./Quiz-BjpjLXgL.js";import"./Cancel-gApFoI2l.js";import"./MenuItem-B0AEuM3_.js";import"./index-py0PdNds.js";const h=I(t.jsx("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"}),"KeyboardReturn");function T({onClick:e,children:s="Trở lại",variant:i="text",size:o="medium",color:u="inherit",className:c="",showIcon:d=!0,iconOnly:l=!1,disabled:m=!1,tooltip:n="",sx:r={},...a}){const p=()=>{e?e():history.back()};if(l){const x=t.jsx(b,{onClick:p,disabled:m,color:u,size:o,className:c,sx:{border:"none",color:"#6b7280","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)",color:"#374151"},...r},...a,children:t.jsx(h,{})});return n?t.jsx(M,{title:n,children:x}):x}return t.jsx(j,{variant:i,size:o,color:u,onClick:p,disabled:m,className:c,startIcon:d?t.jsx(h,{}):null,sx:{border:"none",boxShadow:"none",color:"#6b7280","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)",boxShadow:"none",color:"#374151"},...r},...a,children:s})}function k(e){var c,d,l,m;let s;e.questionType==="SINGLE_CHOICE"?s="single":e.questionType==="MULTIPLE_CHOICE"?s="multiple":e.questionType==="TRUE_FALSE"?s="truefalse":s="fitb";const i=[...e.options].sort((n,r)=>n.seq-r.seq),o=i.map(n=>n.content);let u;if(s==="single"||s==="truefalse"){const n=(d=(c=e.answers)==null?void 0:c[0])==null?void 0:d.answerId;u=i.findIndex(a=>a.id.optionId===n)}else{const n=((l=e.answers)==null?void 0:l.map(r=>r.answerId))||[];u=i.map((r,a)=>n.includes(r.id.optionId)?a:-1).filter(r=>r!==-1)}return{id:e.id,type:s,content:e.content,answerContent:(m=e.answers)==null?void 0:m.map(n=>n.answerContent).join(", "),options:o,answer:u,outcome:e.outcome}}function v(e){return e.map(s=>{var i;return{...s,contents:((i=s.contents)==null?void 0:i.map(o=>o.type==="quiz"&&o.questions?{...o,questions:o.questions.map(k)}:o))||[]}})}const R=()=>{const{courseId:e}=g(),{getModules:s}=q();localStorage.removeItem("courseInfo");const[i,o]=f.useState([]),[u,c]=f.useState(!0);return f.useEffect(()=>{(async()=>{c(!0);const l=await s(e);l.success&&o(v(l.modules)),c(!1)})()},[e]),u?t.jsx(C,{display:"flex",justifyContent:"center",mt:10,children:t.jsx(y,{})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"ml-4",children:t.jsx(T,{})}),t.jsx(S,{isEdit:!0,initialModules:i,onSubmitSuccess:()=>{E.success("Cập nhật module thành công!"),window.history.back()}})]})};export{R as default};
